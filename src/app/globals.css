@import "tailwindcss";
@plugin "@tailwindcss/typography";

@layer utilities {
  .pb-fade-in {
    opacity: 0;
    transform: translateY(6px);
    animation: pb-fade-in 420ms ease-out forwards;
    animation-delay: var(--pb-delay, 0ms);
  }

  @keyframes pb-fade-in {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @media (prefers-reduced-motion: reduce) {
    .pb-fade-in {
      animation: none !important;
      opacity: 1 !important;
      transform: none !important;
    }
    @media (prefers-reduced-motion: reduce) {
      .pb-pop,
      .pb-num {
        animation: none !important;
      }
    }
  }
}

@layer utilities {
  .pb-pop {
    animation: pb-pop 180ms ease-out;
  }
  @keyframes pb-pop {
    0% {
      transform: scale(1);
    }
    60% {
      transform: scale(1.12);
    }
    100% {
      transform: scale(1);
    }
  }

  .pb-num {
    animation: pb-num 160ms ease-out;
  }
  @keyframes pb-num {
    from {
      opacity: 0;
      transform: translateY(16px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @media (prefers-reduced-motion: reduce) {
    .pb-pop,
    .pb-num {
      animation: none !important;
    }
  }
}

/*
  Design tokens (RGB values so Tailwind arbitrary colors work cleanly)
  These are global defaults for the app.
*/
:root {
  --background: 255 255 255; /* white */
  --foreground: 23 23 23; /* near-black */

  --card: 255 255 255;
  --card-foreground: 23 23 23;

  --muted: 115 115 115;
  --border: 229 229 229;
}

/* System dark mode (for now) */
@media (prefers-color-scheme: dark) {
  :root {
    --background: 10 10 10; /* near-black */
    --foreground: 237 237 237; /* near-white */

    --card: 23 23 23;
    --card-foreground: 237 237 237;

    --muted: 163 163 163;
    --border: 38 38 38;
  }
}

/*
  Global defaults
*/
html,
body {
  background-color: rgb(var(--background));
  color: rgb(var(--foreground));
}

body {
  font-family:
    system-ui,
    -apple-system,
    BlinkMacSystemFont,
    "Segoe UI",
    Roboto,
    Helvetica,
    Arial,
    sans-serif;
}

/*
  Optional: make form elements inherit text color correctly
  (prevents weird gray inputs on dark backgrounds)
*/
input,
textarea,
select,
button {
  color: inherit;
}

/* Gives the button a tiny 3D context so the count flip reads like a “card” */
.pb-perspective {
  perspective: 600px;
}

/* Flip animation for numbers (clock-ish) */
.pb-flip {
  display: inline-block;
  transform-origin: 50% 50%;
  animation: pbFlip 500ms cubic-bezier(0.2, 0.7, 0.2, 1);
  will-change: transform, opacity;
}

@keyframes pbFlip {
  0% {
    transform: rotateX(75deg);
    opacity: 0.35;
    filter: blur(0.3px);
  }
  100% {
    transform: rotateX(0deg);
    opacity: 1;
    filter: blur(0);
  }
}

/* --- Post stats micro-animations --- */

.pb-perspective {
  perspective: 600px;
}

.pb-flip {
  display: inline-block;
  transform-origin: 50% 60%;
  animation: pbFlip 320ms cubic-bezier(0.2, 0.75, 0.25, 1);
}

@keyframes pbFlip {
  0% {
    transform: rotateX(0deg);
    opacity: 0.75;
  }
  49% {
    transform: rotateX(-82deg);
    opacity: 0.15;
  }
  50% {
    transform: rotateX(82deg);
    opacity: 0.15;
  }
  100% {
    transform: rotateX(0deg);
    opacity: 1;
  }
}

.pb-pop {
  display: inline-block;
  animation: pbPop 500ms cubic-bezier(0.2, 1.2, 0.2, 1);
}

@keyframes pbPop {
  0% {
    transform: scale(1);
  }
  55% {
    transform: scale(1.18);
  }
  100% {
    transform: scale(1);
  }
}
